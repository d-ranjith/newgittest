#!/bin/bash

# Fetch the new Jenkins Docker image and agent from OpenShift
oc login <OpenShift_URL> -u <username> -p $OPENSHIFT_PASSWORD
oc project <project_name>
oc import-image jenkins:latest --from=<openshift_repo>/jenkins:latest --confirm
oc import-image jenkins-agent-python:latest --from=<openshift_repo>/jenkins-agent-python:latest --confirm
oc import-image jenkins-agent-java:latest --from=<openshift_repo>/jenkins-agent-java:latest --confirm

# Start a Jenkins pod using the new image
oc new-app jenkins:latest

# Validate that the Jenkins pod is running
if oc get pod | grep -q "jenkins.*Running"; then
    echo "Jenkins is running"
else
    echo "Error: Jenkins is not running"
    exit 1
fi

# Run a Python build using the new agent
oc new-build --name=python-build --image-stream=python:latest --binary
oc start-build python-build --from-dir=. --follow

# Run a Java build using the new agent
oc new-build --name=java-build --image-stream=java:latest --binary
oc start-build java-build --from-dir=. --follow

export OPENSHIFT_PASSWORD=your_password


import os

def compare_files(dir1, dir2):
    differences = {}
    for filename in os.listdir(dir1):
        file1_path = os.path.join(dir1, filename)
        file2_path = os.path.join(dir2, filename)
        if os.path.isfile(file1_path) and os.path.isfile(file2_path):
            with open(file1_path) as file1, open(file2_path) as file2:
                lines1 = file1.readlines()
                lines2 = file2.readlines()
                if lines1 != lines2:
                    differences[filename] = [line for line in lines1 if line not in lines2]
    return differences

dir1 = "/path/to/dir1"
dir2 = "/path/to/dir2"
differences = compare_files(dir1, dir2)
print(differences)
